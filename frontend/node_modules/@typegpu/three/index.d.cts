import * as typegpu from 'typegpu';
import { TgpuVar } from 'typegpu';
import * as THREE from 'three/webgpu';
import { UniformNode, UniformArrayNode, TypedArray, StorageBufferNode } from 'three/webgpu';
import * as d from 'typegpu/data';
import InputNode from 'three/src/nodes/core/InputNode.js';

declare function toTSL(fn: () => unknown): THREE.TSL.NodeObject<THREE.Node>;
declare class TSLAccessor<T extends d.AnyWgslData, TNode extends THREE.Node> {
    #private;
    readonly var: TgpuVar<'private', T> | undefined;
    readonly node: THREE.TSL.NodeObject<TNode>;
    constructor(node: THREE.TSL.NodeObject<TNode>, dataType: T);
    get $(): d.InferGPU<T>;
}
declare const fromTSL: typegpu.TgpuComptime<(<T extends d.AnyWgslData, TNode extends THREE.Node>(node: THREE.TSL.NodeObject<TNode>, type: (length: number) => T) => TSLAccessor<T, TNode>) & (<T extends d.AnyWgslData, TNode extends THREE.Node>(node: THREE.TSL.NodeObject<TNode>, type: T) => TSLAccessor<T, TNode>)>;

declare const uv: typegpu.TgpuComptime<(index?: number | undefined) => TSLAccessor<d.Vec2f, THREE.AttributeNode>>;
declare const time: TSLAccessor<d.F32, THREE.Node>;
declare const instanceIndex: TSLAccessor<d.U32, THREE.IndexNode>;
declare const vertexIndex: TSLAccessor<d.U32, THREE.IndexNode>;

/**
 * Shorthand for `t3.fromTSL(uniform(...), ...)`
 *
 * @example
 * ```ts
 * const attractorsLength = t3.uniform(attractorsPositions.array.length, d.u32);
 * // Equivalent to:
 * // const attractorsLength = t3.fromTSL(
 * //   uniform(attractorsPositions.array.length, 'uint'),
 * //   d.u32,
 * // );
 * ```
 */
declare function uniform<TValue, TDataType extends d.AnyWgslData>(value: TValue | InputNode<TValue>, dataType: TDataType): TSLAccessor<TDataType, UniformNode<TValue>>;
declare function uniformArray<TDataType extends d.AnyWgslData>(values: unknown[], elementType: TDataType): TSLAccessor<d.WgslArray<TDataType>, UniformArrayNode>;

/**
 * Shorthand for `t3.fromTSL(instancedArray(...), ...)`
 *
 * @example
 * ```ts
 * const velocityBuffer = t3.instancedArray(count, d.vec3f);
 * // Equivalent to:
 * // const velocityBuffer = t3.fromTSL(
 * //   instancedArray(count, 'vec3'),
 * //   d.arrayOf(d.vec3f),
 * // );
 * ```
 */
declare function instancedArray<TDataType extends d.AnyWgslData>(count: number | TypedArray, elementType: TDataType): TSLAccessor<d.WgslArray<TDataType>, StorageBufferNode>;

export { TSLAccessor, fromTSL, instanceIndex, instancedArray, time, toTSL, uniform, uniformArray, uv, vertexIndex };
