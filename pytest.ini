[pytest]
pythonpath = . backend
asyncio_mode = strict
testpaths = tests
addopts = 
    -v
    --tb=short
    --strict-markers
    --color=yes

markers =
    integration: Integration tests with real dependencies (not mocked)
    slow: Slow tests that may take > 10 seconds
    unit: Fast unit tests with mocked dependencies
    physics: Tests requiring physics kernel
    agents: Tests requiring agent registry
    e2e: End-to-end pipeline tests
    ci: Tests to run in CI environment

filterwarnings =
    ignore::DeprecationWarning
    ignore::UserWarning
    ignore::RuntimeWarning

# Timeout configuration (requires pytest-timeout)
timeout = 120

# Coverage configuration
[run]
source = backend
omit = 
    backend/tests/*
    backend/**/test_*
    backend/**/__pycache__/*

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise NotImplementedError
    if __name__ == .__main__.:
    pass
